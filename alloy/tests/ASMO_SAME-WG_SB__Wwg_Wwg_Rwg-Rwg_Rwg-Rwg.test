// Copyright (c) 2017-2018 Khronos Group. This work is licensed under a
// Creative Commons Attribution 4.0 International License; see
// http://creativecommons.org/licenses/by/4.0/

// Test that threads 3 and 4 can't read updates to x in conflicting order
NEWWG
NEWSG
NEWTHREAD
st.av.scopewg.sc0 x = 1
NEWSG
NEWTHREAD
st.av.scopewg.sc0 x = 2
NEWSG
NEWTHREAD
ld.vis.scopewg.sc0 x = 1
ld.vis.scopewg.sc0 x = 2
NEWSG
NEWTHREAD
ld.vis.scopewg.sc0 x = 2
ld.vis.scopewg.sc0 x = 1
SATISFIABLE consistent[X] && #dr>0
NOSOLUTION consistent[X] && #dr=0